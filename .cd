#!/bin/bash

info "Cave Generator"
debug "Welcome to the Ice Age"

help .cd | indent

# setup directories
cave_home=$(pwd)
cave_lib="$cave_home/lib"
cave_src="$cave_home/src"
cave_build="$cave_home/build"
cave_dist="$cave_home/dist"

function build() {
  #mvn clean compile assembly:single
  mvn clean compile 
  mvn install
}

function upload() {
  build
  if [ ! -d "test" ]; then
    err "Expected test server at ./test" && return
  fi
  mv target/CaveGenerator-*.jar target/CaveGenerator.jar
  cp target/CaveGenerator.jar test/plugins/CaveGenerator.jar
}

function test() {
  upload
  (cd test && ./run.sh test)
}

function dev() {
  test
  echo "restarting... ctrl+C to cancel"
  sleep 1
  dev
}
